<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin - Upload & Edit News</title>
    <style>
        body {
            font-family: sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background-color: #f4f4f4;
            margin: 0;
            padding: 20px;
        }

        .container {
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 800px;
            text-align: center;
        }

        .auth-form,
        .upload-form,
        .edit-form {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        input[type="text"],
        input[type="password"],
        textarea,
        input[type="file"] {
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }

        button,
        .button {
            padding: 10px;
            border: none;
            background-color: #007bff;
            color: white;
            border-radius: 4px;
            cursor: pointer;
            text-decoration: none;
            display: inline-block;
        }

        button.delete-btn {
            background-color: #dc3545;
        }

        button.edit-btn {
            background-color: #ffc107;
            color: black;
        }
        
        button:hover,
        .button:hover {
            background-color: #0056b3;
        }

        button.delete-btn:hover {
            background-color: #c82333;
        }

        button.edit-btn:hover {
            background-color: #e0a800;
        }

        .hidden {
            display: none;
        }
        
        .news-list {
            text-align: left;
            margin-top: 20px;
        }
        
        .news-item {
            border: 1px solid #ddd;
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 4px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
    </style>
</head>

<body>
    <div class="container">
        <div id="authSection">
            <h2>Admin Login</h2>
            <div class="auth-form">
                <input type="text" id="username" placeholder="Username">
                <input type="password" id="password" placeholder="Password">
                <button onclick="login()">Login</button>
            </div>
        </div>

        <div id="adminPanel" class="hidden">
            <h2>Admin Dashboard</h2>
            
            <hr>
            
            <h3>Upload New Article</h3>
            <div class="upload-form">
                <input type="text" id="newsTitle" placeholder="Article Title">
                <textarea id="newsContent" rows="5" placeholder="Article Content"></textarea>
                <input type="file" id="newsImage" accept="image/*">
                <button onclick="uploadNews()">Upload News</button>
            </div>
            
            <hr>
            
            <h3>Edit/Delete Existing Articles</h3>
            <div class="news-list" id="newsList">
                </div>
            
            <div id="editFormSection" class="hidden">
                <h3>Edit Article</h3>
                <div class="edit-form">
                    <input type="hidden" id="editIndex">
                    <input type="text" id="editTitle" placeholder="Article Title">
                    <textarea id="editContent" rows="5" placeholder="Article Content"></textarea>
                    <input type="file" id="editImage" accept="image/*">
                    <button onclick="saveEdit()">Save Changes</button>
                    <button class="button delete-btn" onclick="cancelEdit()">Cancel</button>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // NOTE: This client-side approach is INSECURE and is for demonstration purposes only.
        // In a real application, you'd use a server to handle authentication and data storage.
        
        localStorage.setItem('adminUsername', 'admin');
        localStorage.setItem('adminPassword', 'password123');

        function login() {
            const usernameInput = document.getElementById('username').value;
            const passwordInput = document.getElementById('password').value;

            const correctUsername = localStorage.getItem('adminUsername');
            const correctPassword = localStorage.getItem('adminPassword');

            if (usernameInput === correctUsername && passwordInput === correctPassword) {
                document.getElementById('authSection').classList.add('hidden');
                document.getElementById('adminPanel').classList.remove('hidden');
                loadNewsList();
            } else {
                alert('Unauthorized user');
            }
        }

        // Function to load and display the list of news articles for editing/deleting
        function loadNewsList() {
            const newsList = document.getElementById('newsList');
            const storedNews = localStorage.getItem('newsArticles');
            const newsArticles = storedNews ? JSON.parse(storedNews) : [];

            newsList.innerHTML = ''; // Clear the list

            if (newsArticles.length > 0) {
                newsArticles.forEach((article, index) => {
                    const newsItem = document.createElement('div');
                    newsItem.classList.add('news-item');
                    newsItem.innerHTML = `
                        <span>${article.title}</span>
                        <div>
                            <button class="edit-btn" onclick="editNews(${index})">Edit</button>
                            <button class="delete-btn" onclick="deleteNews(${index})">Delete</button>
                        </div>
                    `;
                    newsList.appendChild(newsItem);
                });
            } else {
                newsList.innerHTML = '<p>No news articles found.</p>';
            }
        }

        // Function to delete a news article
        function deleteNews(index) {
            if (confirm('Are you sure you want to delete this article?')) {
                const storedNews = localStorage.getItem('newsArticles');
                let newsArticles = JSON.parse(storedNews);
                
                newsArticles.splice(index, 1); // Remove the article at the specified index
                localStorage.setItem('newsArticles', JSON.stringify(newsArticles));
                
                alert('Article deleted successfully!');
                loadNewsList(); // Reload the list to reflect the changes
            }
        }

        // Function to open the edit form with the selected article's data
        function editNews(index) {
            const storedNews = localStorage.getItem('newsArticles');
            const newsArticles = JSON.parse(storedNews);
            const articleToEdit = newsArticles[index];

            // Populate the edit form with the article's data
            document.getElementById('editIndex').value = index;
            document.getElementById('editTitle').value = articleToEdit.title;
            document.getElementById('editContent').value = articleToEdit.content;
            
            // Show the edit form
            document.getElementById('editFormSection').classList.remove('hidden');
        }

        // Function to save the edited news article
        function saveEdit() {
            const index = document.getElementById('editIndex').value;
            const title = document.getElementById('editTitle').value;
            const content = document.getElementById('editContent').value;
            const imageFile = document.getElementById('editImage').files[0];

            if (!title || !content) {
                alert('Title and content cannot be empty.');
                return;
            }
            
            const storedNews = localStorage.getItem('newsArticles');
            let newsArticles = JSON.parse(storedNews);
            
            if (imageFile) {
                const reader = new FileReader();
                reader.onload = function(event) {
                    newsArticles[index].title = title;
                    newsArticles[index].content = content;
                    newsArticles[index].image = event.target.result;
                    
                    localStorage.setItem('newsArticles', JSON.stringify(newsArticles));
                    alert('Article updated successfully!');
                    
                    document.getElementById('editFormSection').classList.add('hidden');
                    loadNewsList();
                };
                reader.readAsDataURL(imageFile);
            } else {
                newsArticles[index].title = title;
                newsArticles[index].content = content;
                
                localStorage.setItem('newsArticles', JSON.stringify(newsArticles));
                alert('Article updated successfully!');
                
                document.getElementById('editFormSection').classList.add('hidden');
                loadNewsList();
            }
        }

        // Function to cancel editing
        function cancelEdit() {
            document.getElementById('editFormSection').classList.add('hidden');
            // Clear the edit form fields
            document.getElementById('editTitle').value = '';
            document.getElementById('editContent').value = '';
            document.getElementById('editImage').value = '';
            document.getElementById('editIndex').value = '';
        }


        // Existing uploadNews function, slightly modified
        function uploadNews() {
            const title = document.getElementById('newsTitle').value;
            const content = document.getElementById('newsContent').value;
            const imageFile = document.getElementById('newsImage').files[0];

            if (!title || !content || !imageFile) {
                alert('Please fill in all fields and select an image.');
                return;
            }

            const reader = new FileReader();
            reader.onload = function(event) {
                const imageDataUrl = event.target.result;

                const newArticle = {
                    title: title,
                    content: content,
                    image: imageDataUrl
                };

                const storedNews = localStorage.getItem('newsArticles');
                let newsArticles = storedNews ? JSON.parse(storedNews) : [];

                newsArticles.unshift(newArticle);

                localStorage.setItem('newsArticles', JSON.stringify(newsArticles));

                alert('News uploaded successfully!');

                // Clear the form and reload the news list
                document.getElementById('newsTitle').value = '';
                document.getElementById('newsContent').value = '';
                document.getElementById('newsImage').value = '';
                loadNewsList();
            };

            reader.readAsDataURL(imageFile);
        }
    </script>
</body>

</html>